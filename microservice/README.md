# –ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å Course Parser

–ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å –¥–ª—è –ø—Ä–∏–µ–º–∞ –¥–∞–Ω–Ω—ã—Ö –∫—É—Ä—Å–∞ –æ—Ç —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è –±—Ä–∞—É–∑–µ—Ä–∞ –∏ –∏—Ö –æ–±—Ä–∞–±–æ—Ç–∫–∏ —á–µ—Ä–µ–∑ –≤–∏–¥–µ–æ-–ø–∞–π–ø–ª–∞–π–Ω.

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- üìö –ü—Ä–∏–µ–º –¥–∞–Ω–Ω—ã—Ö –∫—É—Ä—Å–∞ –æ—Ç —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è –±—Ä–∞—É–∑–µ—Ä–∞
- üé¨ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –≤–∏–¥–µ–æ-–ø–∞–π–ø–ª–∞–π–Ω–æ–º –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ m3u8 —Ñ–∞–π–ª–æ–≤
- üîç –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –¥–µ—Ç–µ–∫—Ü–∏—è —Å—Ü–µ–Ω –∏ –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ –∫–∞–¥—Ä–æ–≤
- üìÑ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è HTML –æ—Ç—á–µ—Ç–æ–≤ —Å —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ç–∞–º–∏
- ‚ö° –°–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –∏ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞

## –ó–∞–ø—É—Å–∫

```bash
cd microservice
python app.py
```

–ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É: `http://localhost:8005`

## –≠–Ω–¥–ø–æ–∏–Ω—Ç—ã

### GET /health
–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ —Å–µ—Ä–≤–∏—Å–∞

### POST /api/course
–ü—Ä–∏–µ–º –¥–∞–Ω–Ω—ã—Ö –∫—É—Ä—Å–∞ –æ—Ç —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è –±—Ä–∞—É–∑–µ—Ä–∞ —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –≤–∏–¥–µ–æ

**–ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞:**
```json
{
  "course_data": {
    "title": "–ù–∞–∑–≤–∞–Ω–∏–µ –∫—É—Ä—Å–∞",
    "url": "URL –∫—É—Ä—Å–∞",
    "extractedAt": "2024-01-15T15:30:45.123Z",
    "sections": [
      {
        "title": "–ù–∞–∑–≤–∞–Ω–∏–µ —Å–µ–∫—Ü–∏–∏",
        "items": [
          {
            "title": "–ù–∞–∑–≤–∞–Ω–∏–µ —ç–ª–µ–º–µ–Ω—Ç–∞",
            "videoUrl": "URL –≤–∏–¥–µ–æ",
            "transcript": "–¢–µ–∫—Å—Ç —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ç–∞",
            "dataPurpose": "item-1"
          }
        ]
      }
    ]
  },
  "pipeline_config": {
    "output_dir": "results",
    "threshold": 5.0,
    "min_scene_len": 0.5,
    "extract_clips": false,
    "keep_temp": false,
    "max_modules": 10
  }
}
```

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç –ø–∞–π–ø–ª–∞–π–Ω –æ–±—Ä–∞–±–æ—Ç–∫–∏ –≤–∏–¥–µ–æ
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –≤ —Ñ–æ–Ω–æ–≤–æ–º —Ä–µ–∂–∏–º–µ
- –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –Ω–µ–º–µ–¥–ª–µ–Ω–Ω—ã–π –æ—Ç–≤–µ—Ç —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ –∑–∞–ø—É—Å–∫–µ
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–∞–π–ø–ª–∞–π–Ω–∞

### POST /api/process-video
–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –≤–∏–¥–µ–æ —á–µ—Ä–µ–∑ –ø–∞–π–ø–ª–∞–π–Ω

**–ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞:**
```json
{
  "course_data": {
    "title": "–ù–∞–∑–≤–∞–Ω–∏–µ –∫—É—Ä—Å–∞",
    "sections": [...]
  },
  "pipeline_config": {
    "output_dir": "results",
    "threshold": 5.0,
    "min_scene_len": 0.5,
    "extract_clips": false,
    "keep_temp": true,
    "max_modules": 10
  }
}
```

### POST /api/process-video-sync
–°–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –≤–∏–¥–µ–æ (–¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è)

## –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –ø–∞–π–ø–ª–∞–π–Ω–æ–º

–ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏–Ω—Ç–µ–≥—Ä–∏—Ä—É–µ—Ç—Å—è —Å –≤–∏–¥–µ–æ-–ø–∞–π–ø–ª–∞–π–Ω–æ–º –≤ –ø–∞–ø–∫–µ `../video-pipeline/`:

1. **–ü—Ä–∏–µ–º –¥–∞–Ω–Ω—ã—Ö** - –ø–æ–ª—É—á–∞–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∫—É—Ä—Å–∞
2. **–ü–µ—Ä–µ–¥–∞—á–∞ –≤ –ø–∞–π–ø–ª–∞–π–Ω** - –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –¥–∞–Ω–Ω—ã–µ –≤ `pipeline_api.py`
3. **–û–±—Ä–∞–±–æ—Ç–∫–∞ –≤–∏–¥–µ–æ** - –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è m3u8, –¥–µ—Ç–µ–∫—Ü–∏—è —Å—Ü–µ–Ω, –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ –∫–∞–¥—Ä–æ–≤
4. **–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç—á–µ—Ç–æ–≤** - —Å–æ–∑–¥–∞–Ω–∏–µ HTML –æ—Ç—á–µ—Ç–æ–≤ —Å —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ç–∞–º–∏

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
# –¢–µ—Å—Ç –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
python test_pipeline_integration.py

# –¢–µ—Å—Ç —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤
python test_course_endpoint.py
```

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
microservice/
‚îú‚îÄ‚îÄ app.py                          # –û—Å–Ω–æ–≤–Ω–æ–π –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å
‚îú‚îÄ‚îÄ test_pipeline_integration.py    # –¢–µ—Å—Ç –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
‚îú‚îÄ‚îÄ test_course_endpoint.py         # –¢–µ—Å—Ç —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤
‚îú‚îÄ‚îÄ requirements.txt                # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îî‚îÄ‚îÄ README.md                       # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
```

## –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

- Flask
- requests
- Python 3.7+

## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø–∞–π–ø–ª–∞–π–Ω–∞

–î–æ—Å—Ç—É–ø–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–ª—è `pipeline_config`:

- `output_dir` - –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –¥–ª—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
- `threshold` - –ø–æ—Ä–æ–≥ –¥–µ—Ç–µ–∫—Ü–∏–∏ —Å—Ü–µ–Ω (1-100)
- `min_scene_len` - –º–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –¥–ª–∏–Ω–∞ —Å—Ü–µ–Ω—ã –≤ —Å–µ–∫—É–Ω–¥–∞—Ö
- `extract_clips` - –∏–∑–≤–ª–µ–∫–∞—Ç—å –≤–∏–¥–µ–æ –∫–ª–∏–ø—ã
- `keep_temp` - —Å–æ—Ö—Ä–∞–Ω—è—Ç—å –≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
- `max_modules` - –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –º–æ–¥—É–ª–µ–π –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏
